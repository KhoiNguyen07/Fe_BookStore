import React, { createContext, useContext, useState, useEffect } from "react";

const LanguageContext = createContext();

export const useLanguage = () => {
  const context = useContext(LanguageContext);
  if (!context) {
    throw new Error("useLanguage must be used within a LanguageProvider");
  }
  return context;
};

const translations = {
  en: {
    // Header/Navigation
    nav: {
      home: "Home",
      shop: "Our Shop",
      about: "About us",
      contact: "Contacts",
      cart: "Cart",
      search: "Search",
      signin: "Sign in",
      favorite: "Favorite"
    },

    // Homepage sections
    homepage: {
      banner1: {
        title: "The Reading Corner",
        subtitle:
          "The Book Garden ‚Äì A peaceful garden of knowledge where every book is a seed of inspiration, nurturing curiosity and the love for reading in every soul.",
        cta: "Go to shop",
        subBanner: {
          shipping: {
            title: "Fastest Shipping",
            subtitle: "Order at $39 order"
          },
          payment: {
            title: "100% Safe Payments",
            subtitle: "9 month installments"
          },
          return: {
            title: "14-Days Return",
            subtitle: "Shop with confidence"
          },
          support: {
            title: "24/7 Online Support",
            subtitle: "Delivered to home"
          }
        }
      },
      bestProducts: {
        title: "Our Best Products",
        subtitle: "Discover amazing books and premium collections",
        viewAll: "View All Products",
        shopNow: "Shop Now",
        categories: {
          all: "All Products",
          fiction: "Fiction",
          nonfiction: "Non-Fiction",
          mystery: "Mystery",
          romance: "Romance",
          scifi: "Sci-Fi",
          biography: "Biography",
          history: "History",
          selfhelp: "Self-Help"
        }
      },

      banner: {
        title: "Welcome to BookVerse",
        subtitle: "Your Journey to Knowledge Starts Here",
        cta: "Explore Books",
        discount: "Up to 50% Off",
        featured: "Featured Collection"
      },

      gallery: {
        title: "Gallery",
        subtitle: "Browse our beautiful collection",
        view: "View"
      },

      blog: {
        title: "Latest from Our Blog",
        subtitle:
          "Discover reading tips, author interviews, and book recommendations",
        readMore: "Read More",
        allPosts: "View All Posts",
        tags: {
          classics: "Classics",
          readingList: "Reading List",
          home: "Home",
          bookshelf: "Bookshelf",
          newReleases: "New Releases",
          recommendations: "Recommendations",
          authors: "Authors",
          interviews: "Interviews",
          design: "Design"
        },
        posts: {
          post1: {
            title: "5 Classics Every Booklover Should Read",
            excerpt:
              "A hand-picked list of timeless novels that shaped modern literature. Short summaries and why they matter."
          },
          post2: {
            title: "How to Care for Your Bookshelves",
            excerpt:
              "Practical tips to organize, clean, and style your bookshelves so your collection looks beautiful and lasts longer."
          },
          post3: {
            title: "New Releases: What to Watch For",
            excerpt:
              "A quick roundup of the most anticipated releases this season and the genres to keep an eye on."
          },
          post4: {
            title: "Author Spotlight: Emerging Voices",
            excerpt:
              "Meet the new authors making waves this year ‚Äî brief interviews and recommended titles to start with."
          },
          post5: {
            title: "Designing a Cozy Reading Nook",
            excerpt:
              "Transform any corner of your home into the perfect reading sanctuary with these simple design tips."
          },
          post6: {
            title: "Book Club Discussion Guide",
            excerpt:
              "Essential questions and topics to make your book club meetings more engaging and thoughtful."
          }
        }
      },

      contact: {
        title: "Contact Us",
        subtitle: "Get in touch with our team",
        name: "Name",
        email: "Email",
        message: "Message",
        send: "Send Message",
        nameRequired: "Name is required",
        emailRequired: "Email is required",
        emailInvalid: "Invalid email",
        messageRequired: "Message is required",
        success: "Message sent successfully!",
        error: "Failed to send message. Please try again.",
        address: "Visit Our Store",
        phone: "Call Us",
        hours: "Store Hours"
      }
    },

    // Banner discount / promo section
    bannerDiscount: {
      badge: "‚ú® Special Limited Offers",
      headlineMain: "All books are 50% off now!",
      headlineSub: "Don't miss such a deal! üî•",
      description:
        "Discover amazing stories and knowledge with our premium collection. Transform your reading experience with professionally curated books.",
      ctaExplore: "Explore Our Collection",
      countdownLabel: "Offer ends in",
      featuredCollection: "Featured Book Collection",
      tapToView: "Tap to view full size",
      bookLabels: {
        adventure: "Adventure",
        romance: "Romance"
      },
      floating: {
        featuredBook: "Featured Book",
        clickToPreview: "Click to preview"
      }
    },

    // Footer
    footer: {
      logo: "BOOKVERSE",
      callUs: "CALL US FREE",
      phone: "1800 68 68",
      address: "Address: 1234 Heaven Street, USA.",
      email: "Email: info@example.com",
      fax: "Fax: (+100) 123 456 7890",

      info: {
        title: "Info",
        items: [
          "Custom Service",
          "F.A.Q.'s",
          "Order Tracking",
          "Contact Us",
          "Events"
        ]
      },

      services: {
        title: "Services",
        items: [
          "Sitemap",
          "Privacy Policy",
          "Your Account",
          "Advanced Search",
          "Terms & Conditions"
        ]
      },

      account: {
        title: "Account",
        items: [
          "About Us",
          "Delivery Information",
          "Privacy Policy",
          "Discount",
          "Customer Service"
        ]
      },

      newsletter: {
        title: "Newsletter",
        subtitle:
          "Share contact information, store details, and brand content with your customers.",
        placeholder: "Your email address...",
        subscribe: "Subscribe"
      },

      copyright:
        "¬© Copyright 2024 | BookVerse By BookLaunch. Powered by Shopify.",
      backToTop: "Back to top"
    },

    // Common UI elements
    common: {
      loading: "Loading...",
      error: "Something went wrong",
      noResults: "No results found",
      viewMore: "View More",
      viewLess: "View Less",
      close: "Close",
      previous: "Previous",
      next: "Next",
      save: "Save",
      cancel: "Cancel",
      confirm: "Confirm",
      delete: "Delete",
      edit: "Edit",
      add: "Add",
      remove: "Remove",
      price: "Price",
      quantity: "Quantity",
      total: "Total",
      addToCart: "Add to Cart",
      buyNow: "Buy Now",
      countdown: {
        limitedOffer: "Limited Time Offer",
        dontMiss: "Don't miss out on this amazing deal!",
        days: "Days",
        hours: "Hours",
        minutes: "Mins",
        seconds: "Secs",
        dealExpired: "Deal Expired!",
        checkBack: "Check back for new offers",
        hurry: "Hurry up! Limited stock available"
      }
    }
  },

  vi: {
    // Header/Navigation
    nav: {
      home: "Trang ch·ªß",
      shop: "C·ª≠a h√†ng",
      about: "V·ªÅ ch√∫ng t√¥i",
      contact: "Li√™n h·ªá",
      cart: "Gi·ªè h√†ng",
      search: "T√¨m ki·∫øm",
      signin: "ƒêƒÉng nh·∫≠p",
      favorite: "Y√™u th√≠ch"
    },

    // Homepage sections
    homepage: {
      banner1: {
        title: "G√≥c ƒê·ªçc S√°ch",
        subtitle:
          "Khu V∆∞·ªùn S√°ch ‚Äì M·ªôt khu v∆∞·ªùn tri th·ª©c y√™n b√¨nh n∆°i m·ªói cu·ªën s√°ch l√† m·ªôt h·∫°t gi·ªëng c·∫£m h·ª©ng, nu√¥i d∆∞·ª°ng s·ª± t√≤ m√≤ v√† t√¨nh y√™u ƒë·ªçc s√°ch trong m·ªói t√¢m h·ªìn.",
        cta: "ƒê·∫øn c·ª≠a h√†ng",
        subBanner: {
          shipping: {
            title: "Giao H√†ng Nhanh Nh·∫•t",
            subtitle: "ƒê∆°n h√†ng t·ª´ $39"
          },
          payment: {
            title: "Thanh To√°n An To√†n",
            subtitle: "Tr·∫£ g√≥p 9 th√°ng"
          },
          return: {
            title: "ƒê·ªïi Tr·∫£ Trong 14 Ng√†y",
            subtitle: "Mua s·∫Øm t·ª± tin"
          },
          support: {
            title: "H·ªó Tr·ª£ 24/7",
            subtitle: "Giao h√†ng t·∫≠n nh√†"
          }
        }
      },
      bestProducts: {
        title: "S·∫£n Ph·∫©m N·ªïi B·∫≠t",
        subtitle: "Kh√°m ph√° nh·ªØng cu·ªën s√°ch tuy·ªát v·ªùi v√† b·ªô s∆∞u t·∫≠p cao c·∫•p",
        viewAll: "Xem T·∫•t C·∫£ S·∫£n Ph·∫©m",
        shopNow: "Mua Ngay",
        categories: {
          all: "T·∫•t C·∫£ S·∫£n Ph·∫©m",
          fiction: "Ti·ªÉu Thuy·∫øt",
          nonfiction: "Phi Ti·ªÉu Thuy·∫øt",
          mystery: "Trinh Th√°m",
          romance: "L√£ng M·∫°n",
          scifi: "Khoa H·ªçc Vi·ªÖn T∆∞·ªüng",
          biography: "Ti·ªÉu S·ª≠",
          history: "L·ªãch S·ª≠",
          selfhelp: "Ph√°t Tri·ªÉn B·∫£n Th√¢n"
        }
      },

      banner: {
        title: "Ch√†o M·ª´ng ƒê·∫øn BookVerse",
        subtitle: "H√†nh Tr√¨nh Tri Th·ª©c C·ªßa B·∫°n B·∫Øt ƒê·∫ßu T·ª´ ƒê√¢y",
        cta: "Kh√°m Ph√° S√°ch",
        discount: "Gi·∫£m Gi√° L√™n ƒê·∫øn 50%",
        featured: "B·ªô S∆∞u T·∫≠p N·ªïi B·∫≠t"
      },

      gallery: {
        title: "Th∆∞ Vi·ªán ·∫¢nh",
        subtitle: "Kh√°m ph√° b·ªô s∆∞u t·∫≠p tuy·ªát ƒë·∫πp c·ªßa ch√∫ng t√¥i",
        view: "Xem"
      },

      blog: {
        title: "Tin T·ª©c M·ªõi Nh·∫•t",
        subtitle:
          "Kh√°m ph√° nh·ªØng m·∫πo ƒë·ªçc s√°ch, ph·ªèng v·∫•n t√°c gi·∫£ v√† g·ª£i √Ω s√°ch hay",
        readMore: "ƒê·ªçc Th√™m",
        allPosts: "Xem T·∫•t C·∫£ B√†i Vi·∫øt",
        tags: {
          classics: "Kinh ƒêi·ªÉn",
          readingList: "Danh S√°ch ƒê·ªçc",
          home: "Nh√† C·ª≠a",
          bookshelf: "K·ªá S√°ch",
          newReleases: "S√°ch M·ªõi",
          recommendations: "G·ª£i √ù",
          authors: "T√°c Gi·∫£",
          interviews: "Ph·ªèng V·∫•n",
          design: "Thi·∫øt K·∫ø"
        },
        posts: {
          post1: {
            title: "5 T√°c Ph·∫©m Kinh ƒêi·ªÉn M·ªçi Ng∆∞·ªùi Y√™u S√°ch N√™n ƒê·ªçc",
            excerpt:
              "Danh s√°ch tuy·ªÉn ch·ªçn nh·ªØng ti·ªÉu thuy·∫øt v∆∞·ª£t th·ªùi gian ƒë√£ ƒë·ªãnh h√¨nh vƒÉn h·ªçc hi·ªán ƒë·∫°i. T√≥m t·∫Øt ng·∫Øn g·ªçn v√† l√Ω do t·∫°i sao ch√∫ng quan tr·ªçng."
          },
          post2: {
            title: "C√°ch ChƒÉm S√≥c K·ªá S√°ch C·ªßa B·∫°n",
            excerpt:
              "Nh·ªØng m·∫πo th·ª±c t·∫ø ƒë·ªÉ s·∫Øp x·∫øp, l√†m s·∫°ch v√† trang tr√≠ k·ªá s√°ch sao cho b·ªô s∆∞u t·∫≠p c·ªßa b·∫°n tr√¥ng ƒë·∫πp v√† b·ªÅn l√¢u."
          },
          post3: {
            title: "S√°ch M·ªõi Ph√°t H√†nh: ƒêi·ªÅu C·∫ßn Quan T√¢m",
            excerpt:
              "T·ªïng h·ª£p nhanh nh·ªØng cu·ªën s√°ch ƒë∆∞·ª£c mong ƒë·ª£i nh·∫•t m√πa n√†y v√† nh·ªØng th·ªÉ lo·∫°i c·∫ßn ch√∫ √Ω."
          },
          post4: {
            title: "Ti√™u ƒêi·ªÉm T√°c Gi·∫£: Nh·ªØng Gi·ªçng N√≥i M·ªõi N·ªïi",
            excerpt:
              "G·∫∑p g·ª° nh·ªØng t√°c gi·∫£ m·ªõi ƒëang t·∫°o n√™n l√†n s√≥ng nƒÉm nay ‚Äî ph·ªèng v·∫•n ng·∫Øn v√† nh·ªØng t·ª±a s√°ch ƒë∆∞·ª£c khuy·∫øn ngh·ªã ƒë·ªÉ b·∫Øt ƒë·∫ßu."
          },
          post5: {
            title: "Thi·∫øt K·∫ø G√≥c ƒê·ªçc S√°ch ·∫§m C√∫ng",
            excerpt:
              "Bi·∫øn b·∫•t k·ª≥ g√≥c n√†o trong nh√† b·∫°n th√†nh n∆°i ƒë·ªçc s√°ch ho√†n h·∫£o v·ªõi nh·ªØng m·∫πo thi·∫øt k·∫ø ƒë∆°n gi·∫£n n√†y."
          },
          post6: {
            title: "H∆∞·ªõng D·∫´n Th·∫£o Lu·∫≠n C√¢u L·∫°c B·ªô S√°ch",
            excerpt:
              "Nh·ªØng c√¢u h·ªèi v√† ch·ªß ƒë·ªÅ thi·∫øt y·∫øu ƒë·ªÉ l√†m cho c√°c bu·ªïi h·ªçp c√¢u l·∫°c b·ªô s√°ch c·ªßa b·∫°n h·∫•p d·∫´n v√† s√¢u s·∫Øc h∆°n."
          }
        }
      },

      contact: {
        title: "Li√™n H·ªá V·ªõi Ch√∫ng T√¥i",
        subtitle: "H√£y li√™n l·∫°c v·ªõi ƒë·ªôi ng≈© c·ªßa ch√∫ng t√¥i",
        name: "T√™n",
        email: "Email",
        message: "Tin nh·∫Øn",
        send: "G·ª≠i Tin Nh·∫Øn",
        nameRequired: "T√™n l√† b·∫Øt bu·ªôc",
        emailRequired: "Email l√† b·∫Øt bu·ªôc",
        emailInvalid: "Email kh√¥ng h·ª£p l·ªá",
        messageRequired: "Tin nh·∫Øn l√† b·∫Øt bu·ªôc",
        success: "Tin nh·∫Øn ƒë√£ ƒë∆∞·ª£c g·ª≠i th√†nh c√¥ng!",
        error: "G·ª≠i tin nh·∫Øn th·∫•t b·∫°i. Vui l√≤ng th·ª≠ l·∫°i.",
        address: "Gh√© ThƒÉm C·ª≠a H√†ng",
        phone: "G·ªçi Cho Ch√∫ng T√¥i",
        hours: "Gi·ªù M·ªü C·ª≠a"
      }
    },

    // Banner discount / promo section (Vietnamese)
    bannerDiscount: {
      badge: "‚ú® ∆Øu ƒê√£i C√≥ H·∫°n",
      headlineMain: "T·∫•t c·∫£ s√°ch gi·∫£m 50% ngay b√¢y gi·ªù!",
      headlineSub: "ƒê·ª´ng b·ªè l·ª° c∆° h·ªôi n√†y! üî•",
      description:
        "Kh√°m ph√° nh·ªØng c√¢u chuy·ªán v√† ki·∫øn th·ª©c tuy·ªát v·ªùi v·ªõi b·ªô s∆∞u t·∫≠p cao c·∫•p c·ªßa ch√∫ng t√¥i. N√¢ng t·∫ßm tr·∫£i nghi·ªám ƒë·ªçc v·ªõi nh·ªØng cu·ªën s√°ch ƒë∆∞·ª£c tuy·ªÉn ch·ªçn chuy√™n nghi·ªáp.",
      ctaExplore: "Kh√°m Ph√° B·ªô S∆∞u T·∫≠p",
      countdownLabel: "∆Øu ƒë√£i k·∫øt th√∫c sau",
      featuredCollection: "B·ªô S∆∞u T·∫≠p S√°ch N·ªïi B·∫≠t",
      tapToView: "Ch·∫°m ƒë·ªÉ xem k√≠ch th∆∞·ªõc ƒë·∫ßy ƒë·ªß",
      bookLabels: {
        adventure: "Phi√™u L∆∞u",
        romance: "L√£ng M·∫°n"
      },
      floating: {
        featuredBook: "S√°ch N·ªïi B·∫≠t",
        clickToPreview: "Nh·∫•n ƒë·ªÉ xem tr∆∞·ªõc"
      }
    },

    // Footer
    footer: {
      logo: "BOOKVERSE",
      callUs: "G·ªåI MI·ªÑN PH√ç",
      phone: "1800 68 68",
      address: "ƒê·ªãa ch·ªâ: 1234 Heaven Street, USA.",
      email: "Email: info@example.com",
      fax: "Fax: (+100) 123 456 7890",

      info: {
        title: "Th√¥ng Tin",
        items: [
          "D·ªãch V·ª• Kh√°ch H√†ng",
          "C√¢u H·ªèi Th∆∞·ªùng G·∫∑p",
          "Theo D√µi ƒê∆°n H√†ng",
          "Li√™n H·ªá",
          "S·ª± Ki·ªán"
        ]
      },

      services: {
        title: "D·ªãch V·ª•",
        items: [
          "S∆° ƒê·ªì Trang Web",
          "Ch√≠nh S√°ch B·∫£o M·∫≠t",
          "T√†i Kho·∫£n C·ªßa B·∫°n",
          "T√¨m Ki·∫øm N√¢ng Cao",
          "ƒêi·ªÅu Kho·∫£n & ƒêi·ªÅu Ki·ªán"
        ]
      },

      account: {
        title: "T√†i Kho·∫£n",
        items: [
          "V·ªÅ Ch√∫ng T√¥i",
          "Th√¥ng Tin Giao H√†ng",
          "Ch√≠nh S√°ch B·∫£o M·∫≠t",
          "Gi·∫£m Gi√°",
          "D·ªãch V·ª• Kh√°ch H√†ng"
        ]
      },

      newsletter: {
        title: "ƒêƒÉng K√Ω Nh·∫≠n Tin",
        subtitle:
          "Chia s·∫ª th√¥ng tin li√™n h·ªá, chi ti·∫øt c·ª≠a h√†ng v√† n·ªôi dung th∆∞∆°ng hi·ªáu v·ªõi kh√°ch h√†ng c·ªßa b·∫°n.",
        placeholder: "ƒê·ªãa ch·ªâ email c·ªßa b·∫°n...",
        subscribe: "ƒêƒÉng K√Ω"
      },

      copyright:
        "¬© B·∫£n quy·ªÅn 2024 | BookVerse B·ªüi BookLaunch. ƒê∆∞·ª£c h·ªó tr·ª£ b·ªüi Shopify.",
      backToTop: "V·ªÅ ƒë·∫ßu trang"
    },

    // Common UI elements
    common: {
      loading: "ƒêang t·∫£i...",
      error: "C√≥ l·ªói x·∫£y ra",
      noResults: "Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£",
      viewMore: "Xem Th√™m",
      viewLess: "Xem √çt H∆°n",
      close: "ƒê√≥ng",
      previous: "Tr∆∞·ªõc",
      next: "Ti·∫øp",
      save: "L∆∞u",
      cancel: "H·ªßy",
      confirm: "X√°c Nh·∫≠n",
      delete: "X√≥a",
      edit: "Ch·ªânh S·ª≠a",
      add: "Th√™m",
      remove: "X√≥a",
      price: "Gi√°",
      quantity: "S·ªë L∆∞·ª£ng",
      total: "T·ªïng C·ªông",
      addToCart: "Th√™m V√†o Gi·ªè",
      buyNow: "Mua Ngay",
      countdown: {
        limitedOffer: "∆Øu ƒê√£i C√≥ Th·ªùi H·∫°n",
        dontMiss: "ƒê·ª´ng b·ªè l·ª° c∆° h·ªôi tuy·ªát v·ªùi n√†y!",
        days: "Ng√†y",
        hours: "Gi·ªù",
        minutes: "Ph√∫t",
        seconds: "Gi√¢y",
        dealExpired: "∆Øu ƒë√£i ƒë√£ k·∫øt th√∫c!",
        checkBack: "Quay l·∫°i ƒë·ªÉ xem nh·ªØng ∆∞u ƒë√£i m·ªõi",
        hurry: "Nhanh l√™n! S·ªë l∆∞·ª£ng c√≥ h·∫°n"
      }
    }
  }
};

const LanguageProvider = ({ children }) => {
  const [language, setLanguage] = useState(() => {
    try {
      return localStorage.getItem("language") || "en";
    } catch {
      return "en";
    }
  });

  useEffect(() => {
    try {
      localStorage.setItem("language", language);
    } catch (error) {
      console.warn("Could not save language to localStorage:", error);
    }
  }, [language]);

  const t = (key) => {
    const keys = key.split(".");
    let value = translations[language];

    for (const k of keys) {
      if (value && typeof value === "object") {
        value = value[k];
      } else {
        return key; // Return the key if translation not found
      }
    }

    return value || key;
  };

  const value = {
    language,
    setLanguage,
    t
  };

  return (
    <LanguageContext.Provider value={value}>
      {children}
    </LanguageContext.Provider>
  );
};

export default LanguageProvider;
